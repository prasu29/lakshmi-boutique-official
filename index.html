/*
LakshmiBoutiqueApp.jsx
Single-file React + Tailwind demo app for a boutique shopping site.

Features implemented (client-side demo):
- Separate Admin and User login/sign-up (simple localStorage auth for demo).
- Admin dashboard: add / edit / remove products, upload images (stored as base64), set price, stock.
- Public shop: browse products, search, view product details, add to cart.
- Cart & simulated checkout with multiple payment options (Cash on Delivery, UPI, Mock Stripe/PayPal placeholders).
- Persistence via localStorage so changes persist across reloads (works as a "real page" for demo purposes).
- Real-time updates: when Admin modifies products, Users see updates (because both use same localStorage data).
- WhatsApp contact and pickup notes included on site footer and product page.

How to use:
1. Paste this file into a React app (Create React App / Vite). Tailwind CSS should be installed and configured.
   - If you don't have Tailwind, the site will still render but styling will be minimal.
2. Run the app. The app stores product data and users in your browser localStorage.
3. Default Admin account: email: admin@lakshmi.local  password: admin123
   - Create user accounts using Sign Up form.

Security: This is a front-end demo. Do NOT use this auth or payment flows in production without backend and secure payment integrations.

WhatsApp contact: +91 86392 99665
Pickup notes (displayed on site):
  1. Your cloth material will be picked up from your home — our shop person will come to your house.
  2. The first-time pick-up is free.

*/

import React, { useEffect, useState } from "react";

// Helper utilities
const STORAGE_KEYS = {
  PRODUCTS: "lb_products_v1",
  USERS: "lb_users_v1",
  SESSION: "lb_session_v1",
  ORDERS: "lb_orders_v1",
};

const DEFAULT_ADMIN = {
  email: "admin@lakshmi.local",
  password: "admin123",
  name: "Admin",
  isAdmin: true,
};

function uid(prefix = "id_") {
  return prefix + Math.random().toString(36).slice(2, 9);
}

function readStorage(key, fallback) {
  try {
    const raw = localStorage.getItem(key);
    return raw ? JSON.parse(raw) : fallback;
  } catch (e) {
    return fallback;
  }
}
function writeStorage(key, val) {
  localStorage.setItem(key, JSON.stringify(val));
}

// Bootstrapping default data
function bootstrap() {
  const prods = readStorage(STORAGE_KEYS.PRODUCTS, null);
  if (!prods) {
    const sample = [
      {
        id: uid("p_"),
        title: "Classic Cotton Saree",
        description: "Lightweight cotton saree, comfortable for daily wear.",
        price: 899,
        stock: 10,
        image: null,
      },
      {
        id: uid("p_"),
        title: "Embroidered Blouse",
        description: "Hand-stitched embroidered blouse, multiple sizes.",
        price: 499,
        stock: 15,
        image: null,
      },
    ];
    writeStorage(STORAGE_KEYS.PRODUCTS, sample);
  }

  const users = readStorage(STORAGE_KEYS.USERS, null);
  if (!users) {
    writeStorage(STORAGE_KEYS.USERS, [DEFAULT_ADMIN]);
  } else {
    // ensure admin exists
    const exists = users.some((u) => u.email === DEFAULT_ADMIN.email);
    if (!exists) {
      users.push(DEFAULT_ADMIN);
      writeStorage(STORAGE_KEYS.USERS, users);
    }
  }

  const orders = readStorage(STORAGE_KEYS.ORDERS, null);
  if (!orders) writeStorage(STORAGE_KEYS.ORDERS, []);
}

bootstrap();

// --- App start ---
export default function App() {
  // session
  const [session, setSession] = useState(readStorage(STORAGE_KEYS.SESSION, null));
  const [route, setRoute] = useState("shop"); // shop | admin | cart | login | signup | admin_dashboard

  // data
  const [products, setProducts] = useState(readStorage(STORAGE_KEYS.PRODUCTS, []));
  const [orders, setOrders] = useState(readStorage(STORAGE_KEYS.ORDERS, []));

  // UI
  const [query, setQuery] = useState("");
  const [cart, setCart] = useState(readStorage("lb_cart_v1", []));

  useEffect(() => {
    // sync from localStorage when other tabs / admin changes
    function onStorage(e) {
      if (e.key === STORAGE_KEYS.PRODUCTS) setProducts(readStorage(STORAGE_KEYS.PRODUCTS, []));
      if (e.key === STORAGE_KEYS.ORDERS) setOrders(readStorage(STORAGE_KEYS.ORDERS, []));
      if (e.key === STORAGE_KEYS.SESSION) setSession(readStorage(STORAGE_KEYS.SESSION, null));
    }
    window.addEventListener("storage", onStorage);
    return () => window.removeEventListener("storage", onStorage);
  }, []);

  useEffect(() => {
    writeStorage(STORAGE_KEYS.PRODUCTS, products);
  }, [products]);

  useEffect(() => {
    writeStorage(STORAGE_KEYS.ORDERS, orders);
  }, [orders]);

  useEffect(() => {
    writeStorage("lb_cart_v1", cart);
  }, [cart]);

  useEffect(() => {
    writeStorage(STORAGE_KEYS.SESSION, session);
  }, [session]);

  // Auth helpers
  function signOut() {
    setSession(null);
    setRoute("shop");
  }

  // product operations (admin)
  function addProduct(prod) {
    setProducts((p) => [prod, ...p]);
    setRoute("admin_dashboard");
  }
  function updateProduct(updated) {
    setProducts((p) => p.map((x) => (x.id === updated.id ? updated : x)));
  }
  function removeProduct(id) {
    if (!confirm("Remove product?")) return;
    setProducts((p) => p.filter((x) => x.id !== id));
  }

  // cart operations
  function addToCart(productId, qty = 1) {
    const prod = products.find((p) => p.id === productId);
    if (!prod) return alert("Product not found");
    const exists = cart.find((c) => c.id === productId);
    const realQty = Math.min(qty, prod.stock);
    if (exists) {
      setCart((c) => c.map((i) => (i.id === productId ? { ...i, qty: Math.min(i.qty + realQty, prod.stock) } : i)));
    } else {
      setCart((c) => [...c, { id: productId, qty: realQty }]);
    }
    alert("Added to cart");
  }
  function changeQty(productId, qty) {
    setCart((c) => c.map((i) => (i.id === productId ? { ...i, qty } : i)));
  }
  function removeFromCart(productId) {
    setCart((c) => c.filter((i) => i.id !== productId));
  }

  // Checkout / orders
  function placeOrder({ name, address, phone, paymentMethod }) {
    if (!session || session.isAdmin) return alert("You must be signed in as a customer to place an order.");
    if (cart.length === 0) return alert("Cart is empty");

    // build order
    const items = cart.map((c) => {
      const p = products.find((x) => x.id === c.id);
      return {
        id: p.id,
        title: p.title,
        price: p.price,
        qty: c.qty,
      };
    });
    const total = items.reduce((s, it) => s + it.price * it.qty, 0);
    const order = {
      id: uid("o_"),
      user: session.email,
      name,
      address,
      phone,
      paymentMethod,
      items,
      total,
      status: "Placed",
      createdAt: new Date().toISOString(),
    };

    // reduce stock
    const newProducts = products.map((p) => {
      const it = cart.find((c) => c.id === p.id);
      if (!it) return p;
      return { ...p, stock: Math.max(0, p.stock - it.qty) };
    });
    setProducts(newProducts);

    setOrders((o) => [order, ...o]);
    setCart([]);
    alert("Order placed successfully! Order ID: " + order.id);
    setRoute("orders");
  }

  // small layout
  return (
    <div className="min-h-screen bg-gray-50 text-gray-900">
      <Header
        session={session}
        setRoute={setRoute}
        onSignOut={signOut}
        cartCount={cart.reduce((s, i) => s + i.qty, 0)}
      />
      <main className="max-w-6xl mx-auto p-4">
        {route === "shop" && (
          <ShopView
            products={products}
            query={query}
            setQuery={setQuery}
            addToCart={addToCart}
            setRoute={setRoute}
          />
        )}

        {route === "cart" && (
          <CartView
            cart={cart}
            products={products}
            changeQty={changeQty}
            removeFromCart={removeFromCart}
            placeOrder={placeOrder}
            setRoute={setRoute}
            session={session}
          />
        )}

        {route === "login" && (
          <AuthView
            mode="login"
            onSuccess={(s) => {
              setSession(s);
              setRoute("shop");
            }}
          />
        )}

        {route === "signup" && (
          <AuthView
            mode="signup"
            onSuccess={(s) => {
              setSession(s);
              setRoute("shop");
            }}
          />
        )}

        {route === "admin" && (
          <AdminLogin
            onSuccess={(s) => {
              setSession(s);
              setRoute("admin_dashboard");
            }}
          />
        )}

        {route === "admin_dashboard" && session && session.isAdmin && (
          <AdminDashboard
            products={products}
            addProduct={addProduct}
            updateProduct={updateProduct}
            removeProduct={removeProduct}
            orders={orders}
          />
        )}

        {route === "orders" && session && (
          <OrdersView orders={orders} session={session} />
        )}

        <Footer setRoute={setRoute} />
      </main>
    </div>
  );
}

// --- Components ---
function Header({ session, setRoute, onSignOut, cartCount }) {
  return (
    <header className="bg-white border-b shadow-sm">
      <div className="max-w-6xl mx-auto p-4 flex items-center justify-between">
        <div className="flex items-center gap-4">
          <div className="text-2xl font-extrabold">Lakshmi Boutique</div>
          <div className="text-sm text-gray-600">Style • Comfort • Value</div>
        </div>

        <nav className="flex items-center gap-3">
          <button className="btn" onClick={() => setRoute("shop")}>Shop</button>
          <button className="btn" onClick={() => setRoute("cart")}>Cart ({cartCount})</button>
          {!session && (
            <>
              <button className="btn" onClick={() => setRoute("login")}>Login</button>
              <button className="btn" onClick={() => setRoute("signup")}>Sign Up</button>
            </>
          )}
          {session && (
            <>
              <div className="px-3 py-1 rounded border">{session.name} {session.isAdmin ? "(Admin)" : ""}</div>
              <button className="btn" onClick={() => setRoute(session.isAdmin ? "admin_dashboard" : "shop")}>Dashboard</button>
              <button className="btn" onClick={onSignOut}>Sign out</button>
            </>
          )}
          <a className="btn" href={`https://wa.me/918639299665`} target="_blank" rel="noreferrer">WhatsApp</a>
        </nav>
      </div>
    </header>
  );
}

function ShopView({ products, query, setQuery, addToCart, setRoute }) {
  const filtered = products.filter((p) => p.title.toLowerCase().includes(query.toLowerCase()) || p.description.toLowerCase().includes(query.toLowerCase()));
  return (
    <section>
      <div className="flex items-center justify-between">
        <h1 className="text-2xl font-bold">Shop</h1>
        <div className="w-64">
          <input value={query} onChange={(e) => setQuery(e.target.value)} placeholder="Search products" className="w-full px-3 py-2 border rounded" />
        </div>
      </div>

      <div className="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4">
        {filtered.map((p) => (
          <div key={p.id} className="bg-white p-4 rounded shadow">
            <div className="h-44 bg-gray-100 rounded flex items-center justify-center overflow-hidden">
              {p.image ? <img src={p.image} alt={p.title} className="object-contain h-full" /> : <div className="text-gray-400">No image</div>}
            </div>
            <h2 className="mt-2 font-semibold">{p.title}</h2>
            <div className="text-sm text-gray-600">{p.description}</div>
            <div className="mt-2 flex items-center justify-between">
              <div>
                <div className="text-lg font-bold">₹{p.price}</div>
                <div className="text-xs text-gray-500">Stock: {p.stock}</div>
              </div>
              <div className="flex flex-col gap-2">
                <button className="btn" onClick={() => addToCart(p.id)}>Add to Cart</button>
                <button className="btn-outline" onClick={() => setRoute("product:" + p.id)}>View</button>
              </div>
            </div>
          </div>
        ))}
      </div>

      <PickupNote />
    </section>
  );
}

function CartView({ cart, products, changeQty, removeFromCart, placeOrder, setRoute, session }) {
  const items = cart.map((c) => ({ ...c, product: products.find((p) => p.id === c.id) }));
  const total = items.reduce((s, it) => s + (it.product ? it.product.price * it.qty : 0), 0);

  return (
    <section>
      <h1 className="text-2xl font-bold">Your Cart</h1>
      {items.length === 0 && <div className="p-6 text-center">Cart is empty — go to <button className="link" onClick={() => setRoute("shop")}>shop</button></div>}

      {items.length > 0 && (
        <div className="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4">
          <div className="md:col-span-2">
            {items.map((it) => (
              <div key={it.id} className="bg-white p-4 rounded shadow mb-3 flex items-center gap-4">
                <div className="w-24 h-24 bg-gray-100 flex items-center justify-center overflow-hidden">
                  {it.product?.image ? <img src={it.product.image} alt="" className="object-contain h-full" /> : <div className="text-xs">No image</div>}
                </div>
                <div className="flex-1">
                  <div className="font-semibold">{it.product?.title}</div>
                  <div className="text-sm text-gray-500">₹{it.product?.price} • Stock: {it.product?.stock}</div>
                </div>
                <div className="flex flex-col gap-2 items-end">
                  <div className="flex items-center gap-2">
                    <button className="btn-sm" onClick={() => changeQty(it.id, Math.max(1, it.qty - 1))}>-</button>
                    <div className="px-3">{it.qty}</div>
                    <button className="btn-sm" onClick={() => changeQty(it.id, Math.min((it.product?.stock)||10, it.qty + 1))}>+</button>
                  </div>
                  <button className="text-sm text-red-500" onClick={() => removeFromCart(it.id)}>Remove</button>
                </div>
              </div>
            ))}
          </div>

          <div className="bg-white p-4 rounded shadow">
            <div className="font-semibold">Order Summary</div>
            <div className="mt-2">Total: <span className="font-bold">₹{total}</span></div>

            <CheckoutForm total={total} onPlaceOrder={placeOrder} session={session} />
          </div>
        </div>
      )}

      <PickupNote />
    </section>
  );
}

function CheckoutForm({ total, onPlaceOrder, session }) {
  const [name, setName] = useState(session?.name || "");
  const [address, setAddress] = useState("");
  const [phone, setPhone] = useState("");
  const [paymentMethod, setPaymentMethod] = useState("COD");

  function submit() {
    if (!name || !address || !phone) return alert("Please fill name, address and phone");
    // simulate payment flows
    if (paymentMethod === "UPI") {
      // show a simulated UPI QR or success
      const ok = confirm("Simulate UPI payment (OK = success)");
      if (!ok) return;
    } else if (paymentMethod === "Stripe" || paymentMethod === "PayPal") {
      const ok = confirm(`Simulate ${paymentMethod} payment (OK = success)`);
      if (!ok) return;
    }

    onPlaceOrder({ name, address, phone, paymentMethod });
  }

  return (
    <div>
      <div className="mt-3">
        <label className="text-sm">Name</label>
        <input value={name} onChange={(e) => setName(e.target.value)} className="w-full px-3 py-2 border rounded" />
      </div>
      <div className="mt-3">
        <label className="text-sm">Address</label>
        <textarea value={address} onChange={(e) => setAddress(e.target.value)} className="w-full px-3 py-2 border rounded" />
      </div>
      <div className="mt-3">
        <label className="text-sm">Phone</label>
        <input value={phone} onChange={(e) => setPhone(e.target.value)} className="w-full px-3 py-2 border rounded" />
      </div>

      <div className="mt-3">
        <label className="text-sm">Payment Method</label>
        <select value={paymentMethod} onChange={(e) => setPaymentMethod(e.target.value)} className="w-full px-3 py-2 border rounded">
          <option value="COD">Cash on Delivery</option>
          <option value="UPI">UPI (simulate)</option>
          <option value="Stripe">Card - Stripe (simulate)</option>
          <option value="PayPal">PayPal (simulate)</option>
        </select>
      </div>

      <div className="mt-3">
        <button className="btn w-full" onClick={submit}>Place Order - ₹{total}</button>
      </div>
    </div>
  );
}

function AuthView({ mode, onSuccess }) {
  const [email, setEmail] = useState("");
  const [password, setPassword] = useState("");
  const [name, setName] = useState("");

  function doLogin() {
    const users = readStorage(STORAGE_KEYS.USERS, []);
    const user = users.find((u) => u.email === email && u.password === password);
    if (!user) return alert("Invalid credentials");
    onSuccess({ email: user.email, name: user.name, isAdmin: !!user.isAdmin });
  }

  function doSignup() {
    if (!email || !password || !name) return alert("Fill name, email and password");
    const users = readStorage(STORAGE_KEYS.USERS, []);
    if (users.some((u) => u.email === email)) return alert("Email already exists");
    const newUser = { email, password, name, isAdmin: false };
    users.push(newUser);
    writeStorage(STORAGE_KEYS.USERS, users);
    onSuccess({ email, name, isAdmin: false });
  }

  return (
    <div className="max-w-lg mx-auto bg-white p-6 rounded shadow">
      <h2 className="text-xl font-bold">{mode === "login" ? "Login" : "Sign Up"}</h2>
      {mode === "signup" && (
        <div className="mt-3">
          <label className="text-sm">Name</label>
          <input value={name} onChange={(e) => setName(e.target.value)} className="w-full px-3 py-2 border rounded" />
        </div>
      )}
      <div className="mt-3">
        <label className="text-sm">Email</label>
        <input value={email} onChange={(e) => setEmail(e.target.value)} className="w-full px-3 py-2 border rounded" />
      </div>
      <div className="mt-3">
        <label className="text-sm">Password</label>
        <input type="password" value={password} onChange={(e) => setPassword(e.target.value)} className="w-full px-3 py-2 border rounded" />
      </div>
      <div className="mt-4 flex gap-2">
        {mode === "login" ? (
          <button className="btn" onClick={doLogin}>Login</button>
        ) : (
          <button className="btn" onClick={doSignup}>Sign Up</button>
        )}
      </div>
    </div>
  );
}

function AdminLogin({ onSuccess }) {
  const [email, setEmail] = useState("");
  const [password, setPassword] = useState("");

  function attempt() {
    const users = readStorage(STORAGE_KEYS.USERS, []);
    const admin = users.find((u) => u.email === email && u.password === password && u.isAdmin);
    if (!admin) return alert("Invalid admin credentials");
    onSuccess({ email: admin.email, name: admin.name, isAdmin: true });
  }

  return (
    <div className="max-w-md mx-auto bg-white p-6 rounded shadow">
      <h2 className="text-xl font-bold">Admin Login</h2>
      <div className="mt-3">
        <label className="text-sm">Email</label>
        <input value={email} onChange={(e) => setEmail(e.target.value)} className="w-full px-3 py-2 border rounded" />
      </div>
      <div className="mt-3">
        <label className="text-sm">Password</label>
        <input type="password" value={password} onChange={(e) => setPassword(e.target.value)} className="w-full px-3 py-2 border rounded" />
      </div>
      <div className="mt-4">
        <button className="btn" onClick={attempt}>Sign In</button>
      </div>
      <div className="mt-3 text-xs text-gray-500">Default admin: admin@lakshmi.local / admin123</div>
    </div>
  );
}

function AdminDashboard({ products, addProduct, updateProduct, removeProduct, orders }) {
  const [showAdd, setShowAdd] = useState(false);
  const [editing, setEditing] = useState(null);

  return (
    <section>
      <div className="flex items-center justify-between">
        <h1 className="text-2xl font-bold">Admin Dashboard</h1>
        <div className="flex gap-2">
          <button className="btn" onClick={() => setShowAdd((s) => !s)}>{showAdd ? "Close" : "Add product"}</button>
        </div>
      </div>

      {showAdd && <ProductForm onSave={addProduct} />}

      <div className="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4">
        {products.map((p) => (
          <div key={p.id} className="bg-white p-4 rounded shadow">
            <div className="h-36 bg-gray-100 flex items-center justify-center overflow-hidden">{p.image ? <img src={p.image} alt="" className="object-contain h-full" /> : <div className="text-xs">No image</div>}</div>
            <h3 className="font-semibold mt-2">{p.title}</h3>
            <div className="text-sm text-gray-500">₹{p.price} • Stock: {p.stock}</div>
            <div className="mt-2 flex gap-2">
              <button className="btn-sm" onClick={() => setEditing(p)}>Edit</button>
              <button className="btn-sm" onClick={() => removeProduct(p.id)}>Delete</button>
            </div>
          </div>
        ))}
      </div>

      {editing && <EditModal product={editing} onClose={() => setEditing(null)} onSave={(upd) => { updateProduct(upd); setEditing(null); }} />}

      <div className="mt-8">
        <h2 className="text-xl font-semibold">Orders</h2>
        {orders.length === 0 && <div className="text-sm text-gray-500">No orders yet.</div>}
        {orders.map((o) => (
          <div key={o.id} className="bg-white p-3 rounded shadow my-2">
            <div className="flex justify-between"><div>{o.name} — ₹{o.total}</div><div className="text-xs text-gray-500">{new Date(o.createdAt).toLocaleString()}</div></div>
            <div className="text-sm">{o.items.map(it => `${it.title} x ${it.qty}`).join(", ")}</div>
            <div className="text-xs text-gray-600">{o.paymentMethod} • {o.status}</div>
          </div>
        ))}
      </div>
    </section>
  );
}

function ProductForm({ onSave }) {
  const [title, setTitle] = useState("");
  const [desc, setDesc] = useState("");
  const [price, setPrice] = useState(0);
  const [stock, setStock] = useState(1);
  const [imageSrc, setImageSrc] = useState(null);

  function onFile(e) {
    const f = e.target.files[0];
    if (!f) return;
    const reader = new FileReader();
    reader.onload = () => setImageSrc(reader.result.toString());
    reader.readAsDataURL(f);
  }

  function save() {
    if (!title || !price) return alert("Add title and price");
    const prod = { id: uid("p_"), title, description: desc, price: Number(price), stock: Number(stock), image: imageSrc };
    onSave(prod);
    setTitle(""); setDesc(""); setPrice(0); setStock(1); setImageSrc(null);
  }

  return (
    <div className="bg-white p-4 rounded shadow mt-4">
      <h3 className="font-semibold">Add Product</h3>
      <div className="mt-2 grid grid-cols-1 md:grid-cols-2 gap-2">
        <input value={title} onChange={(e) => setTitle(e.target.value)} placeholder="Title" className="px-3 py-2 border rounded" />
        <input value={price} onChange={(e) => setPrice(e.target.value)} placeholder="Price" className="px-3 py-2 border rounded" />
        <input value={stock} onChange={(e) => setStock(e.target.value)} placeholder="Stock" className="px-3 py-2 border rounded" />
        <input type="file" onChange={onFile} />
      </div>
      <textarea value={desc} onChange={(e) => setDesc(e.target.value)} placeholder="Description" className="w-full mt-2 px-3 py-2 border rounded" />
      <div className="mt-2">
        <button className="btn" onClick={save}>Save Product</button>
      </div>
    </div>
  );
}

function EditModal({ product, onClose, onSave }) {
  const [form, setForm] = useState({ ...product });
  function onFile(e) {
    const f = e.target.files[0];
    if (!f) return;
    const reader = new FileReader();
    reader.onload = () => setForm((s) => ({ ...s, image: reader.result.toString() }));
    reader.readAsDataURL(f);
  }
  return (
    <div className="fixed inset-0 bg-black/40 flex items-center justify-center p-4">
      <div className="bg-white p-4 rounded w-full max-w-md">
        <h3 className="font-semibold">Edit {product.title}</h3>
        <input value={form.title} onChange={(e) => setForm((s) => ({ ...s, title: e.target.value }))} className="w-full mt-2 px-3 py-2 border rounded" />
        <input value={form.price} onChange={(e) => setForm((s) => ({ ...s, price: Number(e.target.value) }))} className="w-full mt-2 px-3 py-2 border rounded" />
        <input value={form.stock} onChange={(e) => setForm((s) => ({ ...s, stock: Number(e.target.value) }))} className="w-full mt-2 px-3 py-2 border rounded" />
        <textarea value={form.description} onChange={(e) => setForm((s) => ({ ...s, description: e.target.value }))} className="w-full mt-2 px-3 py-2 border rounded" />
        <div className="mt-2">Current image:</div>
        <div className="h-28 bg-gray-100 flex items-center justify-center mt-2">{form.image ? <img src={form.image} alt="" className="object-contain h-full" /> : <div className="text-xs">No image</div>}</div>
        <div className="mt-2"><input type="file" onChange={onFile} /></div>
        <div className="mt-3 flex gap-2 justify-end">
          <button className="btn" onClick={() => onSave(form)}>Save</button>
          <button className="btn-outline" onClick={onClose}>Cancel</button>
        </div>
      </div>
    </div>
  );
}

function OrdersView({ orders, session }) {
  const myOrders = orders.filter((o) => o.user === session.email || session.isAdmin);
  return (
    <section>
      <h1 className="text-2xl font-bold">Orders</h1>
      {myOrders.length === 0 && <div className="text-sm text-gray-500 mt-3">No orders to show.</div>}
      {myOrders.map((o) => (
        <div key={o.id} className="bg-white p-3 rounded shadow my-2">
          <div className="flex justify-between"><div className="font-semibold">{o.name}</div><div className="text-xs">{new Date(o.createdAt).toLocaleString()}</div></div>
          <div className="text-sm">{o.items.map(it => `${it.title} x ${it.qty}`).join(", ")}</div>
          <div className="text-xs text-gray-500">Total ₹{o.total} • {o.paymentMethod}</div>
        </div>
      ))}
    </section>
  );
}

function PickupNote() {
  return (
    <div className="mt-8 bg-yellow-50 border-l-4 border-yellow-400 p-4">
      <div className="font-semibold">Pickup Note</div>
      <ol className="mt-2 text-sm list-decimal ml-6">
        <li>Your cloth material will be picked up from your home — our shop person will come to your house.</li>
        <li>The first time pick-up is free.</li>
      </ol>
    </div>
  );
}

function Footer({ setRoute }) {
  return (
    <footer className="mt-12 text-sm text-gray-600">
      <div className="max-w-6xl mx-auto p-4 border-t flex items-center justify-between">
        <div>
          <div className="font-semibold">Lakshmi Boutique</div>
          <div>Contact WhatsApp: <a className="link" href={`https://wa.me/918639299665`} target="_blank" rel="noreferrer">+91 86392 99665</a></div>
        </div>
        <div className="text-right">
          <div>Please call or WhatsApp to schedule pickups. First pick-up is free.</div>
          <div className="mt-2">All products at low and reasonable prices — enjoy curated collection.</div>
        </div>
      </div>
    </footer>
  );
}

// --- small style helpers (Tailwind assumed) ---
// If Tailwind isn't present, these classes will have no effect but the markup will still work.

/* Minimal button classes for clarity (these are not Tailwind but will work if Tailwind present):
.btn, .btn-sm, .btn-outline, .link
*/

/* End file */
